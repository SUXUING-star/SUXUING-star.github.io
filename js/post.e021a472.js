(self["webpackChunkxingyunchaju"]=self["webpackChunkxingyunchaju"]||[]).push([[205],{4537:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return N}});var o=n(6768),s=n(4232);const r={key:0,class:"detail-post"},i={class:"detail-header"},a={class:"detail-meta"},l={key:0,class:"detail-pin-status"},c=["datetime"],d={class:"detail-word-count"},p={class:"detail-reading-time"},h={class:"detail-container"},u={class:"detail-main"},g=["innerHTML"],v={class:"detail-sidebar"},m={key:0,class:"sidebar-section toc-section"},w=["innerHTML"],k={class:"sidebar-section progress-section"},y={class:"progress-bar"},x={class:"progress-text"},f={class:"sidebar-section recent-posts"},b={class:"recent-posts-list"},L={class:"post-date"};function C(e,t,n,C,$,E){const j=(0,o.g2)("router-link");return C.post?((0,o.uX)(),(0,o.CE)("div",r,[(0,o.Lk)("div",i,[(0,o.Lk)("h1",null,(0,s.v_)(C.post.title),1),(0,o.Lk)("div",a,[t[1]||(t[1]=(0,o.Lk)("div",{class:"meta-divider"},null,-1)),C.post.pinned?((0,o.uX)(),(0,o.CE)("span",l,t[0]||(t[0]=[(0,o.Lk)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[(0,o.Lk)("line",{x1:"12",y1:"17",x2:"12",y2:"22"}),(0,o.Lk)("path",{d:"M5 17h14v-1.76a2 2 0 0 0-1.11-1.79l-1.78-.9A2 2 0 0 1 15 10.76V6h1a2 2 0 0 0 0-4H8a2 2 0 0 0 0 4h1v4.76a2 2 0 0 1-1.11 1.79l-1.78.9A2 2 0 0 0 5 15.24Z"})],-1),(0,o.eW)(" 置顶文章 ")]))):(0,o.Q3)("",!0),(0,o.Lk)("time",{datetime:C.post.date},(0,s.v_)(C.post.date),9,c),t[2]||(t[2]=(0,o.Lk)("div",{class:"meta-divider"},null,-1)),(0,o.Lk)("span",d,(0,s.v_)(C.wordCount)+" 字",1),t[3]||(t[3]=(0,o.Lk)("div",{class:"meta-divider"},null,-1)),(0,o.Lk)("span",p,(0,s.v_)(C.readingTime)+" 分钟阅读",1)])]),(0,o.Lk)("div",h,[(0,o.Lk)("div",u,[(0,o.Lk)("div",{class:"detail-content markdown-body",innerHTML:C.renderedContent,ref:"contentRef"},null,8,g)]),(0,o.Lk)("aside",v,[C.tableOfContents?((0,o.uX)(),(0,o.CE)("div",m,[t[4]||(t[4]=(0,o.Fv)('<h3 class="sidebar-title"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="21" y1="10" x2="7" y2="10"></line><line x1="21" y1="6" x2="3" y2="6"></line><line x1="21" y1="14" x2="3" y2="14"></line><line x1="21" y1="18" x2="7" y2="18"></line></svg> 目录 </h3>',1)),(0,o.Lk)("nav",{class:"toc-nav",innerHTML:C.tableOfContents},null,8,w)])):(0,o.Q3)("",!0),(0,o.Lk)("div",k,[t[5]||(t[5]=(0,o.Lk)("h3",{class:"sidebar-title"},[(0,o.Lk)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[(0,o.Lk)("path",{d:"M12 20h9"}),(0,o.Lk)("path",{d:"M16.5 3.5a2.121 2.121 0 0 1 3 3L7 19l-4 1 1-4L16.5 3.5z"})]),(0,o.eW)(" 阅读进度 ")],-1)),(0,o.Lk)("div",y,[(0,o.Lk)("div",{class:"progress-inner",style:(0,s.Tr)({width:C.readingProgress+"%"})},null,4)]),(0,o.Lk)("div",x,(0,s.v_)(C.readingProgress)+"%",1)]),(0,o.Lk)("div",f,[t[6]||(t[6]=(0,o.Fv)('<h3 class="sidebar-title"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path><polyline points="14 2 14 8 20 8"></polyline><line x1="16" y1="13" x2="8" y2="13"></line><line x1="16" y1="17" x2="8" y2="17"></line><polyline points="10 9 9 9 8 9"></polyline></svg> 最近文章 </h3>',1)),(0,o.Lk)("ul",b,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(C.recentPosts,(e=>((0,o.uX)(),(0,o.CE)("li",{key:e.id,class:(0,s.C4)({active:e.id===C.post.id})},[(0,o.bF)(j,{to:"/post/"+e.id},{default:(0,o.k6)((()=>[(0,o.eW)((0,s.v_)(e.title)+" ",1),(0,o.Lk)("span",L,(0,s.v_)(e.date),1)])),_:2},1032,["to"])],2)))),128))])])])])])):(0,o.Q3)("",!0)}n(4114),n(8992),n(2577),n(3949);var $=n(144),E=n(1387),j=n(4249),M=n(357),H=n(1017),T=n.n(H),q=(n(2093),n(2006),n(3206),n(5686),n(895),n(2059),n(9399),n(7316),{name:"PostDetailPage",setup(){const e=(0,E.lq)(),t=(0,j.Pj)(),s=(0,$.KR)(null),r=(0,$.KR)(0),i=(0,$.KR)(""),a=(0,o.EW)((()=>t.state.posts.find((t=>t.id===parseInt(e.params.id))))),l=(0,o.EW)((()=>a.value?.content?a.value.content.replace(/\s+/g,"").length:0)),c=(0,o.EW)((()=>Math.ceil(l.value/300))),d=(0,o.EW)((()=>t.state.posts.slice().sort(((e,t)=>new Date(t.date)-new Date(e.date))).slice(0,5))),p=()=>{window.MathJax={tex:{inlineMath:[["$","$"],["\\(","\\)"]],displayMath:[["$$","$$"],["\\[","\\]"]],processEscapes:!0},svg:{fontCache:"global"},options:{skipHtmlTags:["script","noscript","style","textarea","pre"]}};const e=document.createElement("script");e.src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/3.2.2/es5/tex-svg.min.js",e.async=!0,document.head.appendChild(e)},h=()=>{const e=new M.xI.Renderer;e.code=(e,t)=>{const n=e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;");return`\n          <div class="code-block-wrapper relative" data-language="${t||"text"}">\n            <div class="code-block-header flex justify-between items-center px-4 py-2 bg-gray-800 text-gray-300 rounded-t-lg">\n              <span class="code-block-language font-mono text-sm">${t||"text"}</span>\n              <div class="code-block-actions flex gap-2">\n                <button class="code-collapse-btn p-1 hover:bg-gray-700 rounded" title="折叠/展开">\n                  <svg class="collapse-icon transition-transform" xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" \n                    stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">\n                    <polyline points="6 9 12 15 18 9"></polyline>\n                  </svg>\n                </button>\n                <button class="code-copy-btn p-1 hover:bg-gray-700 rounded" title="复制代码">\n                  <svg class="copy-icon" xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" \n                    stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">\n                    <rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect>\n                    <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path>\n                  </svg>\n                  <svg class="check-icon hidden" xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" \n                    stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">\n                    <polyline points="20 6 9 17 4 12"></polyline>\n                  </svg>\n                </button>\n              </div>\n            </div>\n            <div class="code-block-content overflow-hidden transition-all duration-300">\n              <pre class="!my-0"><code class="language-${t||"text"}">${n}</code></pre>\n            </div>\n          </div>\n        `},e.image=(e,t,n)=>{const o=v(e),s=t?`title="${t}"`:"",r=n||"Image";return`\n          <figure class="markdown-image-container relative group">\n            <div class="image-loading-placeholder bg-gray-100 animate-pulse absolute inset-0 rounded-lg"></div>\n            <img \n              src="${o}" \n              ${s}\n              alt="${r}"\n              loading="lazy" \n              class="markdown-image max-w-full h-auto object-cover rounded-lg shadow-md transition-opacity duration-300 opacity-0"\n              onload="this.style.opacity='1'; this.previousElementSibling.style.display='none'"\n              onerror="this.src='/placeholder-image.jpg'; this.onerror=null; this.previousElementSibling.style.display='none'"\n            />\n            <div class="image-zoom-overlay absolute inset-0 bg-black bg-opacity-50 opacity-0 group-hover:opacity-100 transition-opacity duration-300 flex items-center justify-center cursor-zoom-in">\n              <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8 text-white" fill="none" viewBox="0 0 24 24" stroke="currentColor">\n                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0zM10 7v3m0 0v3m0-3h3m-3 0H7"/>\n              </svg>\n            </div>\n            ${n?`<figcaption class="text-center text-sm text-gray-500 mt-2">${n}</figcaption>`:""}\n          </figure>\n        `},e.heading=(e,t)=>{const n=e.replace(/<[^>]+>/g,""),o=n.toLowerCase().replace(/[^a-z0-9\u4e00-\u9fa5]+/g,"-").replace(/^-+|-+$/g,"").replace(/-+/g,"-");return`\n          <h${t} id="${o}" class="heading-anchor group">\n            ${e}\n            <a href="#${o}" class="anchor-link ml-2 opacity-0 group-hover:opacity-100 transition-opacity">\n              <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" \n                stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">\n                <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path>\n                <path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path>\n              </svg>\n            </a>\n          </h${t}>\n        `};const t=e.paragraph.bind(e);e.paragraph=e=>{const n=/\$([^$]+)\$/g;if(e=e.replace(n,((e,t)=>`<span class="inline-math">\\(${t}\\)</span>`)),e.startsWith("$$")&&e.endsWith("$$")){const t=e.slice(2,-2);return`<div class="math-block">\\[${t}\\]</div>`}return t(e)},M.xI.setOptions({renderer:e,gfm:!0,breaks:!0,smartLists:!0,headerIds:!0})},u=()=>{s.value&&(s.value.querySelectorAll(".code-block-wrapper").forEach((e=>{const t=e.querySelector(".code-collapse-btn"),n=e.querySelector(".code-block-content"),o=e.querySelector(".collapse-icon");t&&n&&o&&t.addEventListener("click",(()=>{const e="0px"!==n.style.maxHeight;e?(n.style.maxHeight="0px",n.style.padding="0",o.style.transform="rotate(180deg)"):(n.style.maxHeight=n.scrollHeight+"px",n.style.padding="1rem",o.style.transform="rotate(0)")}))})),s.value.querySelectorAll(".code-copy-btn").forEach((e=>{e.addEventListener("click",(async()=>{const t=e.closest(".code-block-wrapper"),n=t.querySelector("code").textContent,o=e.querySelector(".copy-icon"),s=e.querySelector(".check-icon");try{await navigator.clipboard.writeText(n),o.classList.add("hidden"),s.classList.remove("hidden");const e=document.createElement("div");e.className="fixed bottom-4 right-4 bg-green-500 text-white px-4 py-2 rounded shadow-lg transition-opacity duration-300",e.textContent="复制成功！",document.body.appendChild(e),setTimeout((()=>{o.classList.remove("hidden"),s.classList.add("hidden"),e.remove()}),2e3)}catch(r){console.error("Failed to copy code:",r);const e=document.createElement("div");e.className="fixed bottom-4 right-4 bg-red-500 text-white px-4 py-2 rounded shadow-lg transition-opacity duration-300",e.textContent="复制失败，请重试",document.body.appendChild(e),setTimeout((()=>{e.remove()}),2e3)}}))})))},g=()=>{s.value&&s.value.querySelectorAll(".markdown-image-container").forEach((e=>{e.addEventListener("click",(()=>{const t=e.querySelector("img");if(!t)return;const n=document.createElement("div");n.className="fixed inset-0 z-50 bg-black bg-opacity-90 flex items-center justify-center p-4";const o=document.createElement("div");o.className="relative max-w-4xl max-h-[90vh] mx-auto";const s=document.createElement("img");s.src=t.src,s.alt=t.alt,s.className="max-w-full max-h-[90vh] object-contain";const r=document.createElement("button");r.className="absolute -top-4 -right-4 bg-white rounded-full p-2 shadow-lg",r.innerHTML='\n        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">\n          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/>\n        </svg>\n      ',o.appendChild(s),o.appendChild(r),n.appendChild(o),document.body.appendChild(n);const i=()=>n.remove();r.addEventListener("click",i),n.addEventListener("click",(e=>{e.target===n&&i()}))}))}))};function v(e){if(!e)return"";if(e.startsWith("http"))return e;if(e.startsWith("/"))return e;try{return n(1751)(`./${e}`)}catch(t){return console.warn(`Image not found: ${e}`),"/placeholder-image.jpg"}}const m=()=>{if(!s.value)return console.warn("contentRef is null"),"";const e=s.value.querySelectorAll("h2, h3, h4");if(console.log("Headings found:",e.length),0===e.length)return console.warn("No headings found in the content"),"";let t='<nav class="table-of-contents"><ul class="toc-list">',n=2,o=[n];e.forEach(((e,s)=>{console.log(`Heading ${s}:`,{text:e.textContent,tagName:e.tagName,id:e.id});const r=parseInt(e.tagName.charAt(1)),i=e.textContent.trim(),a=e.id||`heading-${s}`;if(r>n)t+='<ul class="toc-sublist">',o.push(r);else if(r<n)while(o.length>0&&o[o.length-1]>=r)t+="</ul>",o.pop();t+=`\n      <li class="toc-item level-${r}">\n        <a href="#${a}" class="toc-link" data-level="${r}">\n          ${i}\n        </a>\n      </li>\n    `,n=r}));while(o.length>1)t+="</ul>",o.pop();return t+="</ul></nav>",console.log("Generated TOC:",t),t},w=e=>e?M.xI.parse(e):"",k=(0,o.EW)((()=>{if(!a.value?.content)return"";try{return w(a.value.content)}catch(e){return console.error("Markdown rendering error:",e),"<p>Error rendering content</p>"}})),y=()=>{window.MathJax&&window.MathJax.typesetPromise?.()},x=e=>{const t=e.target.closest(".toc-link");if(!t)return;e.preventDefault();const n=t.getAttribute("href").slice(1),o=document.getElementById(n);if(o){const e=80,t=o.getBoundingClientRect().top,n=t+window.pageYOffset-e;window.scrollTo({top:n,behavior:"smooth"}),o.classList.add("highlight-header"),setTimeout((()=>{o.classList.remove("highlight-header")}),2e3)}};(0,o.wB)(k,(()=>{(0,o.dY)((()=>{g(),u(),T().highlightAll(),i.value=m(),f(),y();const e=document.querySelector(".table-of-contents");e&&e.addEventListener("click",x)}))})),(0,o.sV)((()=>{g(),u(),h(),p(),window.addEventListener("scroll",f),(0,o.dY)((()=>{T().highlightAll(),i.value=m(),f()}))})),(0,o.xo)((()=>{window.removeEventListener("scroll",f);const e=document.querySelector(".table-of-contents");e&&e.removeEventListener("click",x)}));const f=()=>{if(!s.value)return;const e=s.value.offsetHeight,t=window.scrollY,n=window.innerHeight,o=t/(e-n)*100;r.value=Math.min(Math.max(Math.round(o),0),100)};return{post:a,contentRef:s,tableOfContents:i,readingProgress:r,wordCount:l,readingTime:c,recentPosts:d,renderedContent:k}}}),S=n(1241);const B=(0,S.A)(q,[["render",C]]);var N=B},1751:function(e,t,n){var o={"./12-8-1.png":514,"./12-8-2.jpg":6830,"./12-9-1.jpg":9783,"./2.png":7478,"./3.png":4415,"./post2-1.png":1342};function s(e){var t=r(e);return n(t)}function r(e){if(!n.o(o,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return o[e]}s.keys=function(){return Object.keys(o)},s.resolve=r,e.exports=s,s.id=1751}}]);
//# sourceMappingURL=post.e021a472.js.map