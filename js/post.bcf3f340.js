"use strict";(self["webpackChunkxingyunchaju"]=self["webpackChunkxingyunchaju"]||[]).push([[205],{4018:function(e,t,n){n.r(t),n.d(t,{default:function(){return I}});var s=n(6768),l=n(4232);const i={key:0,class:"detail-post"},r={class:"detail-header"},a={class:"detail-meta"},o=["datetime"],d={class:"detail-word-count"},c={class:"detail-reading-time"},u={class:"detail-container"},h={class:"detail-main"},v=["innerHTML"],p={class:"detail-sidebar"},g={key:0,class:"sidebar-section toc-section"},k=["innerHTML"],w={class:"sidebar-section progress-section"},L={class:"progress-bar"},x={class:"progress-text"},f={class:"sidebar-section recent-posts"},y={class:"recent-posts-list"},m={class:"post-date"};function C(e,t,n,C,b,E){const M=(0,s.g2)("router-link");return C.post?((0,s.uX)(),(0,s.CE)("div",i,[(0,s.Lk)("div",r,[(0,s.Lk)("h1",null,(0,l.v_)(C.post.title),1),(0,s.Lk)("div",a,[(0,s.Lk)("time",{datetime:C.post.date},(0,l.v_)(C.post.date),9,o),t[0]||(t[0]=(0,s.Lk)("div",{class:"meta-divider"},null,-1)),(0,s.Lk)("span",d,(0,l.v_)(C.wordCount)+" 字",1),t[1]||(t[1]=(0,s.Lk)("div",{class:"meta-divider"},null,-1)),(0,s.Lk)("span",c,(0,l.v_)(C.readingTime)+" 分钟阅读",1)])]),(0,s.Lk)("div",u,[(0,s.Lk)("div",h,[(0,s.Lk)("div",{class:"detail-content markdown-body",innerHTML:C.renderedContent,ref:"contentRef"},null,8,v)]),(0,s.Lk)("aside",p,[C.tableOfContents?((0,s.uX)(),(0,s.CE)("div",g,[t[2]||(t[2]=(0,s.Fv)('<h3 class="sidebar-title"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="21" y1="10" x2="7" y2="10"></line><line x1="21" y1="6" x2="3" y2="6"></line><line x1="21" y1="14" x2="3" y2="14"></line><line x1="21" y1="18" x2="7" y2="18"></line></svg> 目录 </h3>',1)),(0,s.Lk)("nav",{class:"toc-nav",innerHTML:C.tableOfContents},null,8,k)])):(0,s.Q3)("",!0),(0,s.Lk)("div",w,[t[3]||(t[3]=(0,s.Lk)("h3",{class:"sidebar-title"},[(0,s.Lk)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[(0,s.Lk)("path",{d:"M12 20h9"}),(0,s.Lk)("path",{d:"M16.5 3.5a2.121 2.121 0 0 1 3 3L7 19l-4 1 1-4L16.5 3.5z"})]),(0,s.eW)(" 阅读进度 ")],-1)),(0,s.Lk)("div",L,[(0,s.Lk)("div",{class:"progress-inner",style:(0,l.Tr)({width:C.readingProgress+"%"})},null,4)]),(0,s.Lk)("div",x,(0,l.v_)(C.readingProgress)+"%",1)]),(0,s.Lk)("div",f,[t[4]||(t[4]=(0,s.Fv)('<h3 class="sidebar-title"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path><polyline points="14 2 14 8 20 8"></polyline><line x1="16" y1="13" x2="8" y2="13"></line><line x1="16" y1="17" x2="8" y2="17"></line><polyline points="10 9 9 9 8 9"></polyline></svg> 最近文章 </h3>',1)),(0,s.Lk)("ul",y,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(C.recentPosts,(e=>((0,s.uX)(),(0,s.CE)("li",{key:e.id,class:(0,l.C4)({active:e.id===C.post.id})},[(0,s.bF)(M,{to:"/post/"+e.id},{default:(0,s.k6)((()=>[(0,s.eW)((0,l.v_)(e.title)+" ",1),(0,s.Lk)("span",m,(0,l.v_)(e.date),1)])),_:2},1032,["to"])],2)))),128))])])])])])):(0,s.Q3)("",!0)}n(4114),n(8992),n(2577),n(3949);var b=n(144),E=n(1387),M=n(4249),P=n(357),_=n(1017),H=n.n(_),T=(n(2093),n(2006),n(3206),n(5686),n(895),n(2059),n(9399),n(7316),{name:"PostDetailPage",setup(){const e=(0,E.lq)(),t=(0,M.Pj)(),n=(0,b.KR)(null),l=(0,b.KR)(0),i=(0,b.KR)(""),r=(0,s.EW)((()=>t.state.posts.find((t=>t.id===parseInt(e.params.id))))),a=(0,s.EW)((()=>r.value?.content?r.value.content.replace(/\s+/g,"").length:0)),o=(0,s.EW)((()=>Math.ceil(a.value/300))),d=(0,s.EW)((()=>t.state.posts.slice().sort(((e,t)=>new Date(t.date)-new Date(e.date))).slice(0,5))),c=()=>{const e=new P.xI.Renderer;e.heading=(e,t)=>{const n=e.toLowerCase().replace(/\s+/g,"-").replace(/[^\w-]+/g,"");return`\n          <h${t} id="${n}">\n            ${e}\n          </h${t}>\n        `},P.xI.setOptions({renderer:e,gfm:!0,breaks:!0,smartLists:!0})},u=()=>{if(!n.value)return"";const e=n.value.querySelectorAll("h2, h3, h4");if(0===e.length)return"";let t='<ul class="toc-list">',s=[];e.forEach((e=>{const n=parseInt(e.tagName.charAt(1)),l=e.textContent,i=e.id;while(s.length>0&&s[s.length-1]>=n)t+="</ul>",s.pop();(0===s.length||s[s.length-1]<n)&&(t+="<ul>",s.push(n)),t+=`\n          <li>\n            <a href="#${i}" class="toc-link">\n              ${l}\n            </a>\n          </li>\n        `}));while(s.length>0)t+="</ul>",s.pop();return t},h=e=>e?P.xI.parse(e):"",v=(0,s.EW)((()=>{if(!r.value?.content)return"";try{return h(r.value.content)}catch(e){return console.error("Markdown rendering error:",e),"<p>Error rendering content</p>"}}));(0,s.sV)((()=>{c(),window.addEventListener("scroll",p),(0,s.dY)((()=>{H().highlightAll(),i.value=u(),p()}))})),(0,s.xo)((()=>{window.removeEventListener("scroll",p)})),(0,s.wB)(v,(()=>{(0,s.dY)((()=>{H().highlightAll(),i.value=u(),p()}))}));const p=()=>{if(!n.value)return;const e=n.value.offsetHeight,t=window.scrollY,s=window.innerHeight,i=t/(e-s)*100;l.value=Math.min(Math.max(Math.round(i),0),100)};return{post:r,contentRef:n,tableOfContents:i,readingProgress:l,wordCount:a,readingTime:o,recentPosts:d,renderedContent:v}}}),W=n(1241);const j=(0,W.A)(T,[["render",C]]);var I=j}}]);
//# sourceMappingURL=post.bcf3f340.js.map